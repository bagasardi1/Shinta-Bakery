<template>
  <div class="font-sans bg-amber-50 text-gray-800">
    <!-- üå∏ Navbar -->
    <Navbar />

<!-- üå∏ Hero Section -->
<section
  class="bg-hero text-white w-full min-h-screen flex items-center px-4 sm:px-6 md:px-12 relative overflow-hidden">

  <div
    class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-6 md:gap-10 relative z-20">

    <!-- TEKS -->
    <div
      class="md:w-1/2 w-full text-center md:text-left pt-14 sm:pt-20 md:pt-0 px-2 pb-10 md:pb-0 fade-in relative z-30">

<h1
  class="text-3xl sm:text-4xl md:text-6xl font-bold mb-4 leading-tight drop-shadow-lg mt-10 md:mt-16"
>
  Special Offer This Month
</h1>

      <p class="text-sm sm:text-base md:text-lg opacity-90 mx-auto md:mx-0 max-w-md">
        We're here with the best desserts in town, made fresh with love and premium ingredients.
      </p>

      <Link
        href="/products"
        class="mt-6 inline-block bg-white text-pink-600 px-6 md:px-8 py-3 md:py-4 rounded-full font-semibold shadow hover:bg-pink-100 transition-all duration-300"
      >
        üç∞ Buy Now
      </Link>
    </div>

    <!-- GAMBAR -->
    <div class="relative flex justify-center md:w-1/2 w-full fade-in z-10">

      <img 
        src="/images/LandingPage/cupcake-background.png"
        alt="Cupcake Hero"
        class="
          pointer-events-none object-contain select-none
          w-[78%] xs:w-[70%] sm:w-[65%] md:w-[75%] lg:w-[70%] xl:w-[60%]

          /* Jarak vertikal disesuaikan per layar */
          mt-6 sm:mt-10 md:mt-0 md:translate-y-10 lg:translate-y-16 xl:translate-y-20
        "
      />

    </div>

  </div>
</section>




    <!-- üå∏ Menu Section -->
    <section class="py-20 bg-amber-50 reveal">
      <div class="container mx-auto text-center">
        <h2 class="text-3xl font-bold text-pink-600 mb-12">Our Menu</h2>

        <div
          class="
            grid grid-cols-1 gap-8 px-4
            sm:grid-cols-2 
            md:grid-cols-4
            max-w-8xl mx-auto
          "
        >
          <div
            v-for="category in props.categories"
            :key="category.id"
            class="bg-white shadow-md rounded-xl p-6 border border-pink-100 reveal flex flex-col items-center text-center"
          >
            <!-- Ikon -->
            <div
              class="w-16 h-16 bg-pink-200 rounded-full flex items-center justify-center mb-4"
            >
              <svg
                v-if="category.name === 'Snack'"
                xmlns="http://www.w3.org/2000/svg"
                class="h-8 w-8 text-pink-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 11V7a4 4 0 00-8 0v4M12 13a4 4 0 100 8h4a4 4 0 004-4v-4a4 4 0 00-4-4h-4z"
                />
              </svg>

              <svg
                v-else-if="category.name === 'Food'"
                xmlns="http://www.w3.org/2000/svg"
                class="h-8 w-8 text-pink-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9M9 19c0 1.105-1.105 2-2.5 2S4 20.105 4 19V9C4 7.895 5.105 7 6.5 7S9 7.895 9 9v10zm6.5-3a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
                />
              </svg>

              <svg
                v-else-if="category.name === 'Drinks'"
                xmlns="http://www.w3.org/2000/svg"
                class="h-8 w-8 text-pink-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 20H5a2 2 0 01-2-2v-7l3-4a2 2 0 012-1h10a2 2 0 012 1l3 4v7a2 2 0 01-2 2z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 11v6m-6-6h12"
                />
              </svg>
            </div>

            <h3 class="text-lg font-semibold mb-2 text-pink-700">
              {{ category.name }}
            </h3>

            <p class="text-gray-600 text-sm mb-4">
              In the new era of technology we look in the future with certainty
              and pride for our life.
            </p>

            <Link
              :href="`/products?category=${category.id}`"
              class="text-pink-500 hover:underline font-medium text-xs"
            >
              Explore Menu ‚Üí
            </Link>
          </div>
        </div>
      </div>
    </section>

    <!-- üå∏ Ready Section (WA restored) -->
    <section class="py-20 bg-white reveal">
      <div
        class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-10"
      >
        <div class="md:w-1/2 px-8">
          <h2 class="text-4xl font-bold text-pink-600 mb-4 leading-tight">
            Ready to Serve <br />
            Various Kinds of Food
          </h2>
          <p class="text-gray-700 mb-6 leading-relaxed">
We're ready to present a wide variety of delicious cakes, from classics to modern creations, made with love and the finest ingredients. Come explore our catalog and find your favorite cake to complete every special occasion!
          </p>

          <div class="flex gap-4">
            <!-- WA CONTACT US (RESTORED) -->
            <a
              href="https://wa.me/628113040033"
              target="_blank"
              class="px-6 py-3 bg-pink-600 text-white rounded-full font-semibold hover:bg-pink-700 transition"
            >
              Contact Us
            </a>

            <Link
              href="/products"
              class="px-6 py-3 border border-pink-600 text-pink-600 rounded-full hover:bg-pink-600 hover:text-white transition"
            >
              View Catalog
            </Link>
          </div>
        </div>

        <div class="md:w-1/2 flex justify-center">
          <img
            src="/images/LandingPage/group 19.png"
            class="w-80 sm:w-96 md:w-[480px]"
          />
        </div>
      </div>
    </section>

    <!-- ÔøΩ Testimonials Section -->
    <section class="py-20 bg-pink-50 reveal">
      <div class="container mx-auto px-6">
        <h2 class="text-3xl md:text-4xl font-bold text-pink-600 mb-4 text-center">
          What Our Customers Say
        </h2>
        <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">
          Don't just take our word for it ‚Äî hear from our happy customers!
        </p>

        <!-- Carousel Container -->
        <div v-if="props.testimonials && props.testimonials.length > 0" class="relative max-w-5xl mx-auto">
          <!-- Carousel Wrapper -->
          <div class="overflow-hidden">
            <div 
              class="flex transition-transform duration-500 ease-in-out"
              :style="{ transform: `translateX(-${currentSlide * 100}%)` }"
            >
              <!-- Testimonial Cards -->
              <div
                v-for="(testimonial, index) in props.testimonials"
                :key="index"
                class="w-full flex-shrink-0 px-4"
              >
                <div class="bg-white p-8 md:p-10 rounded-2xl shadow-lg mx-auto max-w-3xl border border-pink-100">
                  <!-- Quote Icon -->
                  <div class="text-pink-300 text-5xl mb-4 text-center">"</div>
                  
                  <!-- Rating Stars -->
                  <div class="flex gap-1 mb-6 justify-center">
                    <span
                      v-for="star in 5"
                      :key="star"
                      class="text-2xl"
                      :class="star <= testimonial.rating ? 'text-yellow-400' : 'text-gray-300'"
                    >
                      ‚≠ê
                    </span>
                  </div>

                  <!-- Comment -->
                  <p class="text-gray-700 text-lg md:text-xl mb-8 italic leading-relaxed text-center">
                    {{ testimonial.comment || 'Great product!' }}
                  </p>

                  <!-- Customer Info -->
                  <div class="border-t border-pink-100 pt-6 text-center">
                    <p class="font-semibold text-pink-700 text-lg">
                      {{ testimonial.customer_name }}
                    </p>
                    <p class="text-sm text-gray-500 mt-1">
                      {{ testimonial.created_at }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Navigation Buttons -->
          <button
            @click="prevSlide"
            class="absolute left-0 top-1/2 -translate-y-1/2 bg-white hover:bg-pink-100 text-pink-600 rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 z-10"
            :class="{ 'opacity-50 cursor-not-allowed': currentSlide === 0 }"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
          </button>
          <button
            @click="nextSlide"
            class="absolute right-0 top-1/2 -translate-y-1/2 bg-white hover:bg-pink-100 text-pink-600 rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 z-10"
            :class="{ 'opacity-50 cursor-not-allowed': currentSlide === props.testimonials.length - 1 }"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>

          <!-- Dots Indicator -->
          <div class="flex justify-center gap-2 mt-8">
            <button
              v-for="(testimonial, index) in props.testimonials"
              :key="index"
              @click="currentSlide = index"
              class="w-3 h-3 rounded-full transition-all duration-300"
              :class="currentSlide === index ? 'bg-pink-600 w-8' : 'bg-pink-300 hover:bg-pink-400'"
            ></button>
          </div>
        </div>

        <!-- Empty State -->
        <div v-else class="text-center py-12">
          <p class="text-gray-500 text-lg">
            üå∏ Be the first to share your experience with us!
          </p>
        </div>
      </div>
    </section>

    <!-- ÔøΩüå∏ Our Story -->
    <section id="our-story" class="py-20 bg-pink-100 text-center reveal">
      <div class="container mx-auto max-w-3xl">
        <h2 class="text-3xl font-bold text-pink-700 mb-6">Our Story</h2>
        <p class="text-gray-700 leading-relaxed mb-8">
                Shinta Bakery started from a small home kitchen with a passion for creating delightful treats. Our founder, Shinta, believed in the magic of combining simple, high-quality ingredients with time-honored recipes. Today, we continue her legacy by sharing our love for baking with our community, one delicious snack at a time.
        </p>
      </div>

      <div class="mt-10 text-sm text-gray-600">
        ¬© 2025 Shinta Bakery ¬∑ Privacy Policy ¬∑ Terms
      </div>
    </section>
  </div>
</template>

<script setup>
import Navbar from "../Components/Navbar.vue";
import { Link } from "@inertiajs/vue3";
import { defineProps, onMounted, onUnmounted, ref } from "vue";

const props = defineProps({
  categories: Array,
  testimonials: Array
});

// üé† Carousel State
const currentSlide = ref(0);
let autoSlideInterval = null;

// üîÑ Next Slide
const nextSlide = () => {
  if (props.testimonials && currentSlide.value < props.testimonials.length - 1) {
    currentSlide.value++;
  } else {
    currentSlide.value = 0; // Loop back to start
  }
};

// ‚¨ÖÔ∏è Previous Slide
const prevSlide = () => {
  if (currentSlide.value > 0) {
    currentSlide.value--;
  } else if (props.testimonials) {
    currentSlide.value = props.testimonials.length - 1; // Loop to end
  }
};

onMounted(() => {
  // Reveal animation
  const elements = document.querySelectorAll(".reveal");
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) entry.target.classList.add("visible");
    });
  });
  elements.forEach((el) => observer.observe(el));

  // ‚è±Ô∏è Auto-slide every 5 seconds for testimonials
  if (props.testimonials && props.testimonials.length > 1) {
    autoSlideInterval = setInterval(nextSlide, 5000);
  }
});

// üßπ Cleanup interval on unmount
onUnmounted(() => {
  if (autoSlideInterval) {
    clearInterval(autoSlideInterval);
  }
});
</script>

<style scoped>
.bg-hero {
  background-image: url("/images/LandingPage/bg hero.png");
  background-size: cover;
  background-position: center;
}

/* Fade in */
.fade-in {
  opacity: 0;
  transform: translateY(30px);
  animation: fadeIn 1.4s ease-out forwards;
}

@keyframes fadeIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Scroll reveal */
.reveal {
  opacity: 0;
  transform: translateY(40px);
  transition: all 1s ease;
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}
</style>
